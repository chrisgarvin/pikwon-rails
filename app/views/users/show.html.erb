<div class="container profile">
<% if current_user %>
<h1 class="header"><%= @headers.shuffle.first.upcase %> <%= current_user.fname.upcase %>. </h1>
<h1>username: <%= current_user.handle.upcase %></h1>
<h1>first name: <%= current_user.fname.upcase %></h1>
<h1>last name: <%= current_user.lname.upcase %></h1>
<h1>e-mail: <%= current_user.email.upcase %></h1>
<h1>member since: <%= current_user.created_at.utc.strftime("%D") %></h1>
<% else %>
<h1>Have you signed up yet?</h1>
<% end %>
<%= link_to "BACK", "/" %>
</div>
<% if current_user %>

<% current_user.posts.each do |post| %>

<div class="post_history" >

  <span class="delete_container">
  <span class="delete">
  <%= link_to "X", post_path(post.id), method: :delete,
data: { confirm: "Are you sure you want to delete this post?"} %>
</span>
</span>

  <div class="profile_options">
  <%= post.options.first.option_text.upcase %>
  <span class="likes"><%= percentage(post.options.first.option_picks.to_i, post.options.second.option_picks.to_i) %>
  %</span>
  </div>
  <div class="percent_bar">


  </div>
  <div class="profile_options">
    <%= post.options.second.option_text.upcase %>
    <span class="likes"><%= percentage(post.options.second.option_picks.to_i, post.options.first.option_picks.to_i) %>
  %  </span>
  </div>
  POSTED ON: <%= post.created_at.utc.strftime("%D") %>
</div>

<% end %>

<% end %>

<script>
var count = <%= current_user.posts.count * 2 %>

for(var i = 0, j = 0; i < count; i+=2, j++){

  var first = document.getElementsByClassName("likes")[i].innerHTML.toString()

  document.getElementsByClassName("percent_bar")[j].style.background = "linear-gradient(to right, black 0%, black " + parseInt(first) + "%, red " + parseInt(first) + "%, red 100%)";

  var test = document.getElementsByClassName("post_history")[j];

  function showDelete(){
    this.getElementsByClassName("delete")[0].style.display = "block";
  }

  function hideDelete(){
    this.getElementsByClassName("delete")[0].style.display = "none";
  }

  test.addEventListener("mouseover", showDelete)
  test.addEventListener("mouseout", hideDelete)

}

</script>
