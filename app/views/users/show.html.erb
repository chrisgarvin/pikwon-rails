<div class="container profile">
<% if current_user %>
<h1 class="header"><%= @headers.shuffle.first.upcase %> <%= current_user.fname.upcase %>. </h1>
<h2>username: <%= current_user.handle.upcase %></h2>
<h2>first name: <%= current_user.fname.upcase %></h2>
<h2>last name: <%= current_user.lname.upcase %></h2>
<h2>e-mail: <%= current_user.email.upcase %></h2>
<h2>member since: <%= current_user.created_at.utc.strftime("%D") %></h2>
<% else %>
<h1>Have you signed up yet?</h1>
<% end %>
<%= link_to "BACK", "/" %>
</div>
<% if current_user %>
<div class="post_history_container">
<% current_user.posts.each do |post| %>

<div class="post_history" >

  <span class="delete_container">
  <span class="delete">
  <%= link_to "X", post_path(post.id), method: :delete,
data: { confirm: "Are you sure you want to delete this post?"} %>
</span>
</span>

  <div class="profile_options">
  <%= post.options.first.option_text.upcase %>
  <span class="likes"><%= percentage(post.options.first.option_picks.to_i, post.options.second.option_picks.to_i) %>
  %</span>
  </div>
  <div class="profile_options">
    <%= post.options.second.option_text.upcase %>
    <span class="likes"><%= percentage(post.options.second.option_picks.to_i, post.options.first.option_picks.to_i) %>
  %  </span>
  </div>
  POSTED ON: <%= post.created_at.utc.strftime("%D") %>
</div>

<% end %>
</div>

<% end %>

<script>
var count = <%= current_user.posts.count * 2 %>

for(var i = 0, j = 0; i < count; i+=2, j++){

  var first = document.getElementsByClassName("likes")[i].innerHTML.toString()
  var second = document.getElementsByClassName("likes")[i+1].innerHTML.toString()

  document.getElementsByClassName("profile_options")[i].style.background =
  "linear-gradient(to right, rgb(94, 94, 92) 0%, rgb(94, 94, 92) " + parseInt(first)
   + "%, #3dd9da " + parseInt(first) + "%, #3dd9da 100%)";
   document.getElementsByClassName("profile_options")[i+1].style.background =
   "linear-gradient(to right, rgb(94, 94, 92) 0%, rgb(94, 94, 92) " + parseInt(second)
    + "%, #3dd9da " + parseInt(second) + "%, #3dd9da 100%)";

  var test = document.getElementsByClassName("post_history")[j];

  function showDelete(){
    this.getElementsByClassName("delete")[0].style.display = "block";
  }

  function hideDelete(){
    this.getElementsByClassName("delete")[0].style.display = "none";
  }

  test.addEventListener("mouseover", showDelete)
  test.addEventListener("mouseout", hideDelete)

}

</script>
